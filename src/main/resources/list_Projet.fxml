<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>

<VBox xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="Controllers.ProjetListController"
      spacing="0" style="-fx-background-color: #F0F4F8;">

    <!-- En-tÃªte avec gradient -->
    <VBox spacing="20" style="-fx-background-color: linear-gradient(to right, #2D5F7F, #4A90E2); -fx-padding: 30;">
        <HBox spacing="20" alignment="CENTER_LEFT">
            <VBox spacing="5">
                <Label text="ðŸ“Š Gestion des Projets"
                       style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #FFFFFF;"/>
                <Label text="GÃ©rez vos projets de maniÃ¨re professionnelle"
                       style="-fx-font-size: 14px; -fx-text-fill: #E8F0F7; -fx-padding: 5 0 0 0;"/>
            </VBox>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="âž• Nouveau Projet"
                    style="-fx-background-color: #48BB78; -fx-text-fill: white; -fx-font-weight: bold;
                           -fx-background-radius: 8; -fx-padding: 14 28; -fx-font-size: 14px; -fx-cursor: hand;"
                    onAction="#handleAddNew"/>
        </HBox>
    </VBox>

    <!-- Contenu principal -->
    <VBox spacing="20" style="-fx-padding: 25;" VBox.vgrow="ALWAYS">

        <!-- Barre de recherche et filtres avancÃ©s -->
        <VBox spacing="12" style="-fx-background-color: #FFFFFF; -fx-border-radius: 10;
                                  -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 4, 0, 0, 2);
                                  -fx-padding: 18;">

            <HBox spacing="15" alignment="CENTER_LEFT">
                <TextField fx:id="searchField"
                           style="-fx-background-color: #F5F7FA; -fx-border-color: #D5DDE5;
                                  -fx-border-radius: 8; -fx-background-radius: 8;
                                  -fx-padding: 10 15; -fx-font-size: 13px; -fx-pref-width: 350px;
                                  -fx-text-fill: #2D3748;"
                           promptText="ðŸ” Rechercher par nom, description, ID..."/>

                <ComboBox fx:id="statutFilterComboBox"
                          style="-fx-background-color: #F5F7FA; -fx-border-color: #D5DDE5;
                                 -fx-border-radius: 8; -fx-background-radius: 8;
                                 -fx-padding: 8 12; -fx-font-size: 13px; -fx-pref-width: 180px;"
                          promptText="ðŸ“Œ Filtrer par statut"/>

                <Region HBox.hgrow="ALWAYS"/>

                <Button text="â†» RafraÃ®chir"
                        style="-fx-background-color: #4A90E2; -fx-text-fill: white;
                               -fx-background-radius: 6; -fx-padding: 8 16; -fx-font-weight: bold; -fx-font-size: 12px; -fx-cursor: hand;"
                        onAction="#handleRefresh"/>
                <Button text="âœ• Effacer"
                        style="-fx-background-color: #CBD5E0; -fx-text-fill: #2D3748;
                               -fx-background-radius: 6; -fx-padding: 8 16; -fx-font-weight: bold; -fx-font-size: 12px; -fx-cursor: hand;"
                        onAction="#handleClearSearch"/>
            </HBox>
        </VBox>

        <!-- Statistiques avec cartes -->
        <HBox spacing="15" alignment="TOP_LEFT">
            <!-- Carte 1: Total projets -->
            <VBox spacing="10" style="-fx-background-color: #FFFFFF; -fx-border-radius: 10;
                                      -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 3, 0, 0, 1);
                                      -fx-padding: 18;" HBox.hgrow="ALWAYS">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸ“¦" style="-fx-font-size: 24px;"/>
                    <VBox spacing="3">
                        <Label text="Total Projets" style="-fx-font-size: 12px; -fx-text-fill: #718096; -fx-font-weight: bold;"/>
                        <Label fx:id="totalProjetsLabel" text="0"
                               style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #2D5F7F;"/>
                    </VBox>
                </HBox>
            </VBox>

            <!-- Carte 2: RÃ©sultats -->
            <VBox spacing="10" style="-fx-background-color: #FFFFFF; -fx-border-radius: 10;
                                      -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 3, 0, 0, 1);
                                      -fx-padding: 18;" HBox.hgrow="ALWAYS">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸŽ¯" style="-fx-font-size: 24px;"/>
                    <VBox spacing="3">
                        <Label text="RÃ©sultats" style="-fx-font-size: 12px; -fx-text-fill: #718096; -fx-font-weight: bold;"/>
                        <Label fx:id="activeSearchLabel" text="0"
                               style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #48BB78;"/>
                    </VBox>
                </HBox>
            </VBox>

            <!-- Carte 3: Dernier projet -->
            <VBox spacing="10" style="-fx-background-color: #FFFFFF; -fx-border-radius: 10;
                                      -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 3, 0, 0, 1);
                                      -fx-padding: 18;" HBox.hgrow="ALWAYS">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="â±ï¸" style="-fx-font-size: 24px;"/>
                    <VBox spacing="3">
                        <Label text="Dernier" style="-fx-font-size: 12px; -fx-text-fill: #718096; -fx-font-weight: bold;"/>
                        <Label fx:id="lastCreationLabel" text="N/A"
                               style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #4A6FA5;"/>
                    </VBox>
                </HBox>
            </VBox>
        </HBox>

        <!-- Tableau des projets -->
        <VBox spacing="12" VBox.vgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="ðŸ“‹ Liste DÃ©taillÃ©e" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #334155;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="ðŸ“Š Statistiques AvancÃ©es"
                        style="-fx-background-color: linear-gradient(to right, #4A6FA5, #5B7DB1); -fx-text-fill: white;
                               -fx-background-radius: 6; -fx-padding: 8 16; -fx-font-weight: bold; -fx-font-size: 12px; -fx-cursor: hand;"
                        onAction="#handleShowStatistics"/>
            </HBox>

            <VBox style="-fx-background-color: white; -fx-border-radius: 12;
                         -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.08), 15, 0, 0, 5);
                         -fx-padding: 0;" VBox.vgrow="ALWAYS">
                <ListView fx:id="projetListView"
                          style="-fx-background-color: transparent;"
                          VBox.vgrow="ALWAYS"/>
            </VBox>
        </VBox>
    </VBox>

    <!-- Pied de page -->
    <HBox spacing="15" alignment="CENTER_RIGHT" style="-fx-background-color: white;
                                                       -fx-border-color: #E2E8F0; -fx-border-width: 1 0 0 0;
                                                       -fx-padding: 15 25;">
        <Label text="Â© 2024 SystÃ¨me de Gestion de Projets" style="-fx-font-size: 11px; -fx-text-fill: #CBD5E0;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="ðŸ“¤ Exporter"
                style="-fx-background-color: linear-gradient(to right, #4A6FA5, #5B7DB1); -fx-text-fill: white;
                       -fx-background-radius: 6; -fx-padding: 8 16; -fx-font-weight: bold; -fx-font-size: 12px; -fx-cursor: hand;"
                onAction="#handleExport"/>
    </HBox>
</VBox>